{"ast":null,"code":"import React from'react';import{Renderer}from'core/renderers';import{classes,distance}from'common/util';import styles from'./GraphRenderer.module.scss';class GraphRenderer extends Renderer{constructor(props){super(props);this.elementRef=React.createRef();this.selectedNode=null;this.togglePan(true);this.toggleZoom(true);}handleMouseDown(e){super.handleMouseDown(e);const coords=this.computeCoords(e);const{nodes,dimensions}=this.props.data;const{nodeRadius}=dimensions;this.selectedNode=nodes.find(node=>distance(coords,node)<=nodeRadius);}handleMouseMove(e){if(this.selectedNode){const{x,y}=this.computeCoords(e);const node=this.props.data.findNode(this.selectedNode.id);node.x=x;node.y=y;this.refresh();}else{super.handleMouseMove(e);}}computeCoords(e){const svg=this.elementRef.current;const s=svg.createSVGPoint();s.x=e.clientX;s.y=e.clientY;const{x,y}=s.matrixTransform(svg.getScreenCTM().inverse());return{x,y};}renderData(){const{nodes,edges,isDirected,isWeighted,dimensions}=this.props.data;const{baseWidth,baseHeight,nodeRadius,arrowGap,nodeWeightGap,edgeWeightGap}=dimensions;const viewBox=[(this.centerX-baseWidth/2)*this.zoom,(this.centerY-baseHeight/2)*this.zoom,baseWidth*this.zoom,baseHeight*this.zoom];return/*#__PURE__*/React.createElement(\"svg\",{className:styles.graph,viewBox:viewBox,ref:this.elementRef},/*#__PURE__*/React.createElement(\"defs\",null,/*#__PURE__*/React.createElement(\"marker\",{id:\"markerArrow\",markerWidth:\"4\",markerHeight:\"4\",refX:\"2\",refY:\"2\",orient:\"auto\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M0,0 L0,4 L4,2 L0,0\",className:styles.arrow})),/*#__PURE__*/React.createElement(\"marker\",{id:\"markerArrowSelected\",markerWidth:\"4\",markerHeight:\"4\",refX:\"2\",refY:\"2\",orient:\"auto\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M0,0 L0,4 L4,2 L0,0\",className:classes(styles.arrow,styles.selected)})),/*#__PURE__*/React.createElement(\"marker\",{id:\"markerArrowVisited\",markerWidth:\"4\",markerHeight:\"4\",refX:\"2\",refY:\"2\",orient:\"auto\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M0,0 L0,4 L4,2 L0,0\",className:classes(styles.arrow,styles.visited)}))),edges.sort((a,b)=>a.visitedCount-b.visitedCount).map(edge=>{const{source,target,weight,visitedCount,selectedCount}=edge;const sourceNode=this.props.data.findNode(source);const targetNode=this.props.data.findNode(target);if(!sourceNode||!targetNode)return undefined;const{x:sx,y:sy}=sourceNode;let{x:ex,y:ey}=targetNode;const mx=(sx+ex)/2;const my=(sy+ey)/2;const dx=ex-sx;const dy=ey-sy;const degree=Math.atan2(dy,dx)/Math.PI*180;if(isDirected){const length=Math.sqrt(dx*dx+dy*dy);if(length!==0){ex=sx+dx/length*(length-nodeRadius-arrowGap);ey=sy+dy/length*(length-nodeRadius-arrowGap);}}return/*#__PURE__*/React.createElement(\"g\",{className:classes(styles.edge,selectedCount&&styles.selected,visitedCount&&styles.visited),key:\"\".concat(source,\"-\").concat(target)},/*#__PURE__*/React.createElement(\"path\",{d:\"M\".concat(sx,\",\").concat(sy,\" L\").concat(ex,\",\").concat(ey),className:classes(styles.line,isDirected&&styles.directed)}),isWeighted&&/*#__PURE__*/React.createElement(\"g\",{transform:\"translate(\".concat(mx,\",\").concat(my,\")\")},/*#__PURE__*/React.createElement(\"text\",{className:styles.weight,transform:\"rotate(\".concat(degree,\")\"),y:-edgeWeightGap},this.toString(weight))));}),nodes.map(node=>{const{id,x,y,weight,visitedCount,selectedCount}=node;return/*#__PURE__*/React.createElement(\"g\",{className:classes(styles.node,selectedCount&&styles.selected,visitedCount&&styles.visited),key:id,transform:\"translate(\".concat(x,\",\").concat(y,\")\")},/*#__PURE__*/React.createElement(\"circle\",{className:styles.circle,r:nodeRadius}),/*#__PURE__*/React.createElement(\"text\",{className:styles.id},id),isWeighted&&/*#__PURE__*/React.createElement(\"text\",{className:styles.weight,x:nodeRadius+nodeWeightGap},this.toString(weight)));}));}}export default GraphRenderer;","map":{"version":3,"names":["React","Renderer","classes","distance","styles","GraphRenderer","constructor","props","elementRef","createRef","selectedNode","togglePan","toggleZoom","handleMouseDown","e","coords","computeCoords","nodes","dimensions","data","nodeRadius","find","node","handleMouseMove","x","y","findNode","id","refresh","svg","current","s","createSVGPoint","clientX","clientY","matrixTransform","getScreenCTM","inverse","renderData","edges","isDirected","isWeighted","baseWidth","baseHeight","arrowGap","nodeWeightGap","edgeWeightGap","viewBox","centerX","zoom","centerY","createElement","className","graph","ref","markerWidth","markerHeight","refX","refY","orient","d","arrow","selected","visited","sort","a","b","visitedCount","map","edge","source","target","weight","selectedCount","sourceNode","targetNode","undefined","sx","sy","ex","ey","mx","my","dx","dy","degree","Math","atan2","PI","length","sqrt","key","concat","line","directed","transform","toString","circle","r"],"sources":["/home/om-bade/Downloads/AlgoLab-main/visualizer/src/core/renderers/GraphRenderer/index.js"],"sourcesContent":["import React from 'react';\nimport { Renderer } from 'core/renderers';\nimport { classes, distance } from 'common/util';\nimport styles from './GraphRenderer.module.scss';\n\nclass GraphRenderer extends Renderer {\n  constructor(props) {\n    super(props);\n\n    this.elementRef = React.createRef();\n    this.selectedNode = null;\n\n    this.togglePan(true);\n    this.toggleZoom(true);\n  }\n\n  handleMouseDown(e) {\n    super.handleMouseDown(e);\n    const coords = this.computeCoords(e);\n    const { nodes, dimensions } = this.props.data;\n    const { nodeRadius } = dimensions;\n    this.selectedNode = nodes.find(node => distance(coords, node) <= nodeRadius);\n  }\n\n  handleMouseMove(e) {\n    if (this.selectedNode) {\n      const { x, y } = this.computeCoords(e);\n      const node = this.props.data.findNode(this.selectedNode.id);\n      node.x = x;\n      node.y = y;\n      this.refresh();\n    } else {\n      super.handleMouseMove(e);\n    }\n  }\n\n  computeCoords(e) {\n    const svg = this.elementRef.current;\n    const s = svg.createSVGPoint();\n    s.x = e.clientX;\n    s.y = e.clientY;\n    const { x, y } = s.matrixTransform(svg.getScreenCTM().inverse());\n    return { x, y };\n  }\n\n  renderData() {\n    const { nodes, edges, isDirected, isWeighted, dimensions } = this.props.data;\n    const { baseWidth, baseHeight, nodeRadius, arrowGap, nodeWeightGap, edgeWeightGap } = dimensions;\n    const viewBox = [\n      (this.centerX - baseWidth / 2) * this.zoom,\n      (this.centerY - baseHeight / 2) * this.zoom,\n      baseWidth * this.zoom,\n      baseHeight * this.zoom,\n    ];\n    return (\n      <svg className={styles.graph} viewBox={viewBox} ref={this.elementRef}>\n        <defs>\n          <marker id=\"markerArrow\" markerWidth=\"4\" markerHeight=\"4\" refX=\"2\" refY=\"2\" orient=\"auto\">\n            <path d=\"M0,0 L0,4 L4,2 L0,0\" className={styles.arrow} />\n          </marker>\n          <marker id=\"markerArrowSelected\" markerWidth=\"4\" markerHeight=\"4\" refX=\"2\" refY=\"2\" orient=\"auto\">\n            <path d=\"M0,0 L0,4 L4,2 L0,0\" className={classes(styles.arrow, styles.selected)} />\n          </marker>\n          <marker id=\"markerArrowVisited\" markerWidth=\"4\" markerHeight=\"4\" refX=\"2\" refY=\"2\" orient=\"auto\">\n            <path d=\"M0,0 L0,4 L4,2 L0,0\" className={classes(styles.arrow, styles.visited)} />\n          </marker>\n        </defs>\n        {\n          edges.sort((a, b) => a.visitedCount - b.visitedCount).map(edge => {\n            const { source, target, weight, visitedCount, selectedCount } = edge;\n            const sourceNode = this.props.data.findNode(source);\n            const targetNode = this.props.data.findNode(target);\n            if (!sourceNode || !targetNode) return undefined;\n            const { x: sx, y: sy } = sourceNode;\n            let { x: ex, y: ey } = targetNode;\n            const mx = (sx + ex) / 2;\n            const my = (sy + ey) / 2;\n            const dx = ex - sx;\n            const dy = ey - sy;\n            const degree = Math.atan2(dy, dx) / Math.PI * 180;\n            if (isDirected) {\n              const length = Math.sqrt(dx * dx + dy * dy);\n              if (length !== 0) {\n                ex = sx + dx / length * (length - nodeRadius - arrowGap);\n                ey = sy + dy / length * (length - nodeRadius - arrowGap);\n              }\n            }\n\n            return (\n              <g className={classes(styles.edge, selectedCount && styles.selected, visitedCount && styles.visited)}\n                 key={`${source}-${target}`}>\n                <path d={`M${sx},${sy} L${ex},${ey}`} className={classes(styles.line, isDirected && styles.directed)} />\n                {\n                  isWeighted &&\n                  <g transform={`translate(${mx},${my})`}>\n                    <text className={styles.weight} transform={`rotate(${degree})`}\n                          y={-edgeWeightGap}>{this.toString(weight)}</text>\n                  </g>\n                }\n              </g>\n            );\n          })\n        }\n        {\n          nodes.map(node => {\n            const { id, x, y, weight, visitedCount, selectedCount } = node;\n            return (\n              <g className={classes(styles.node, selectedCount && styles.selected, visitedCount && styles.visited)}\n                 key={id} transform={`translate(${x},${y})`}>\n                <circle className={styles.circle} r={nodeRadius} />\n                <text className={styles.id}>{id}</text>\n                {\n                  isWeighted &&\n                  <text className={styles.weight} x={nodeRadius + nodeWeightGap}>{this.toString(weight)}</text>\n                }\n              </g>\n            );\n          })\n        }\n      </svg>\n    );\n  }\n}\n\nexport default GraphRenderer;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}