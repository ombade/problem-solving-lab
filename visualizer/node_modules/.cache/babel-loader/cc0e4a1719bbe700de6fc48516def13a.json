{"ast":null,"code":"import React from'react';import{connect}from'react-redux';import{BaseComponent}from'components';import{actions}from'reducers';import styles from'./VisualizationViewer.module.scss';import*as TracerClasses from'core/tracers';import*as LayoutClasses from'core/layouts';import{classes}from'common/util';class VisualizationViewer extends BaseComponent{constructor(props){super(props);this.reset();}reset(){this.root=null;this.objects={};}componentDidMount(){const{chunks,cursor}=this.props.player;this.update(chunks,cursor);}componentWillReceiveProps(nextProps){const{chunks,cursor}=nextProps.player;const{chunks:oldChunks,cursor:oldCursor}=this.props.player;if(chunks!==oldChunks||cursor!==oldCursor){this.update(chunks,cursor,oldChunks,oldCursor);}}update(chunks,cursor){let oldChunks=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let oldCursor=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;let applyingChunks;if(cursor>oldCursor){applyingChunks=chunks.slice(oldCursor,cursor);}else{this.reset();applyingChunks=chunks.slice(0,cursor);}applyingChunks.forEach(chunk=>this.applyChunk(chunk));const lastChunk=applyingChunks[applyingChunks.length-1];if(lastChunk&&lastChunk.lineNumber!==undefined){this.props.setLineIndicator({lineNumber:lastChunk.lineNumber,cursor});}else{this.props.setLineIndicator(undefined);}}applyCommand(command){const{key,method,args}=command;try{if(key===null&&method==='setRoot'){const[root]=args;this.root=this.objects[root];}else if(method==='destroy'){delete this.objects[key];}else if(method in LayoutClasses){const[children]=args;const LayoutClass=LayoutClasses[method];this.objects[key]=new LayoutClass(key,key=>this.objects[key],children);}else if(method in TracerClasses){const className=method;const[title=className]=args;const TracerClass=TracerClasses[className];this.objects[key]=new TracerClass(key,key=>this.objects[key],title);}else{this.objects[key][method](...args);}}catch(error){this.handleError(error);}}applyChunk(chunk){chunk.commands.forEach(command=>this.applyCommand(command));}render(){const{className}=this.props;return/*#__PURE__*/React.createElement(\"div\",{className:classes(styles.visualization_viewer,className)},this.root&&this.root.render());}}export default connect(_ref=>{let{player}=_ref;return{player};},actions)(VisualizationViewer);","map":{"version":3,"names":["React","connect","BaseComponent","actions","styles","TracerClasses","LayoutClasses","classes","VisualizationViewer","constructor","props","reset","root","objects","componentDidMount","chunks","cursor","player","update","componentWillReceiveProps","nextProps","oldChunks","oldCursor","arguments","length","undefined","applyingChunks","slice","forEach","chunk","applyChunk","lastChunk","lineNumber","setLineIndicator","applyCommand","command","key","method","args","children","LayoutClass","className","title","TracerClass","error","handleError","commands","render","createElement","visualization_viewer","_ref"],"sources":["/home/om-bade/Downloads/AlgoLab-main/visualizer/src/components/VisualizationViewer/index.js"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { BaseComponent } from 'components';\nimport { actions } from 'reducers';\nimport styles from './VisualizationViewer.module.scss';\nimport * as TracerClasses from 'core/tracers';\nimport * as LayoutClasses from 'core/layouts';\nimport { classes } from 'common/util';\n\nclass VisualizationViewer extends BaseComponent {\n  constructor(props) {\n    super(props);\n\n    this.reset();\n  }\n\n  reset() {\n    this.root = null;\n    this.objects = {};\n  }\n\n  componentDidMount() {\n    const { chunks, cursor } = this.props.player;\n    this.update(chunks, cursor);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { chunks, cursor } = nextProps.player;\n    const { chunks: oldChunks, cursor: oldCursor } = this.props.player;\n    if (chunks !== oldChunks || cursor !== oldCursor) {\n      this.update(chunks, cursor, oldChunks, oldCursor);\n    }\n  }\n\n  update(chunks, cursor, oldChunks = [], oldCursor = 0) {\n    let applyingChunks;\n    if (cursor > oldCursor) {\n      applyingChunks = chunks.slice(oldCursor, cursor);\n    } else {\n      this.reset();\n      applyingChunks = chunks.slice(0, cursor);\n    }\n    applyingChunks.forEach(chunk => this.applyChunk(chunk));\n\n    const lastChunk = applyingChunks[applyingChunks.length - 1];\n    if (lastChunk && lastChunk.lineNumber !== undefined) {\n      this.props.setLineIndicator({ lineNumber: lastChunk.lineNumber, cursor });\n    } else {\n      this.props.setLineIndicator(undefined);\n    }\n  }\n\n  applyCommand(command) {\n    const { key, method, args } = command;\n    try {\n      if (key === null && method === 'setRoot') {\n        const [root] = args;\n        this.root = this.objects[root];\n      } else if (method === 'destroy') {\n        delete this.objects[key];\n      } else if (method in LayoutClasses) {\n        const [children] = args;\n        const LayoutClass = LayoutClasses[method];\n        this.objects[key] = new LayoutClass(key, key => this.objects[key], children);\n      } else if (method in TracerClasses) {\n        const className = method;\n        const [title = className] = args;\n        const TracerClass = TracerClasses[className];\n        this.objects[key] = new TracerClass(key, key => this.objects[key], title);\n      } else {\n        this.objects[key][method](...args);\n      }\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  applyChunk(chunk) {\n    chunk.commands.forEach(command => this.applyCommand(command));\n  }\n\n  render() {\n    const { className } = this.props;\n\n    return (\n      <div className={classes(styles.visualization_viewer, className)}>\n        {\n          this.root && this.root.render()\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(({ player }) => ({ player }), actions)(\n  VisualizationViewer,\n);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}